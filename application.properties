# =============================================================================
# ОНЛАЙН КІТАПХАНА - КОНФИГУРАЦИЯ ПРИЛОЖЕНИЯ / ҚОСЫМША КОНФИГУРАЦИЯСЫ
# =============================================================================
# Это основной файл конфигурации Spring Boot приложения
# Здесь настраиваются подключения к БД, безопасность, логирование и другие параметры
# =============================================================================

# === ОСНОВНЫЕ НАСТРОЙКИ ПРИЛОЖЕНИЯ / НЕГІЗГІ БАПТАУЛАР ===
spring.application.name=OnlineKitaphana

# Разрешаем циклические зависимости между бинами (SecurityConfig <-> UserService)
# Циклді тәуелділіктерге рұқсат береміз
spring.main.allow-circular-references=true

# Порт на котором запускается приложение (по умолчанию 8080)
# Қосымша жұмыс істейтін порт
server.port=8080

# Контекстный путь приложения (например, http://localhost:8080/)
# server.servlet.context-path=/kitaphana

# === НАСТРОЙКИ БАЗЫ ДАННЫХ POSTGRESQL / POSTGRESQL ДЕРЕКҚОР БАПТАУЛАРЫ ===

# URL подключения к PostgreSQL
# ВАЖНО: Создай базу данных 'online_kitaphana' в pgAdmin перед запуском!
# Формат: jdbc:postgresql://host:port/database_name
spring.datasource.url=jdbc:postgresql://localhost:5432/online_kitaphana

# Имя пользователя PostgreSQL (по умолчанию postgres)
spring.datasource.username=postgres

# Пароль от PostgreSQL (ЗАМЕНИ на свой пароль, который указал при установке!)
# МАҢЫЗДЫ: Орнату кезінде көрсеткен құпия сөзіңізді пайдаланыңыз!
spring.datasource.password=2008181

# Драйвер PostgreSQL
spring.datasource.driver-class-name=org.postgresql.Driver

# === НАСТРОЙКИ JPA И HIBERNATE / JPA ЖӘНЕ HIBERNATE БАПТАУЛАРЫ ===

# Диалект PostgreSQL для Hibernate
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Автоматическое создание/обновление таблиц в БД
# create - пересоздает таблицы при каждом запуске (удаляет данные!)
# create-drop - создает при запуске, удаляет при остановке
# update - обновляет схему БД, не удаляя данные (РЕКОМЕНДУЕТСЯ для разработки)
# validate - только проверяет схему, не изменяет БД (для продакшена)
# none - ничего не делает
spring.jpa.hibernate.ddl-auto=update

# Показывать SQL запросы в консоли (полезно для отладки)
# SQL сұраныстарын консольде көрсету
spring.jpa.show-sql=true

# Форматировать SQL запросы для читаемости
spring.jpa.properties.hibernate.format_sql=true

# Показывать параметры SQL запросов
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Включить статистику Hibernate (опционально)
# spring.jpa.properties.hibernate.generate_statistics=true

# === НАСТРОЙКИ ПУЛА СОЕДИНЕНИЙ HIKARICP / ҚОСЫЛЫМ ПУЛЫ БАПТАУЛАРЫ ===

# Максимальное количество соединений в пуле
spring.datasource.hikari.maximum-pool-size=10

# Минимальное количество простаивающих соединений
spring.datasource.hikari.minimum-idle=5

# Время жизни соединения (30 минут)
spring.datasource.hikari.max-lifetime=1800000

# Таймаут подключения (30 секунд)
spring.datasource.hikari.connection-timeout=30000

# === НАСТРОЙКИ SPRING SECURITY / ҚАУІПСІЗДІК БАПТАУЛАРЫ ===

# Пользователь и пароль по умолчанию (только для разработки!)
# В продакшене используй настройку через SecurityConfig класс
# spring.security.user.name=admin
# spring.security.user.password=admin123

# === НАСТРОЙКИ THYMELEAF / THYMELEAF БАПТАУЛАРЫ ===

# Включить кеширование шаблонов (false для разработки, true для продакшена)
spring.thymeleaf.cache=false

# Префикс для шаблонов
spring.thymeleaf.prefix=classpath:/templates/

# Суффикс для шаблонов
spring.thymeleaf.suffix=.html

# Режим шаблонов
spring.thymeleaf.mode=HTML

# Кодировка
spring.thymeleaf.encoding=UTF-8

# === НАСТРОЙКИ МНОГОЯЗЫЧНОСТИ (i18n) / КӨПТІЛДІЛІК БАПТАУЛАРЫ ===

# Базовое имя файлов с переводами
spring.messages.basename=messages

# Кодировка файлов переводов
spring.messages.encoding=UTF-8

# Язык по умолчанию (русский)
spring.web.locale=ru

# Использовать Accept-Language заголовок из браузера
spring.web.locale-resolver=accept_header

# === НАСТРОЙКИ КЕШИРОВАНИЯ / КЭШТЕУ БАПТАУЛАРЫ ===

# Тип кеша (используем Caffeine - быстрый in-memory кеш)
spring.cache.type=caffeine

# Имена кешей
spring.cache.cache-names=books,categories,userLibrary

# Спецификация Caffeine кеша
# maximumSize - максимальное количество элементов
# expireAfterWrite - время жизни после записи (1 час = 1h)
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=1h

# === НАСТРОЙКИ ЗАГРУЗКИ ФАЙЛОВ / ФАЙЛДАРДЫ ЖҮКТЕУ БАПТАУЛАРЫ ===

# Максимальный размер загружаемого файла (10MB)
spring.servlet.multipart.max-file-size=10MB

# Максимальный размер всего запроса
spring.servlet.multipart.max-request-size=10MB

# === НАСТРОЙКИ ЛОГИРОВАНИЯ / ЖУРНАЛДАУ БАПТАУЛАРЫ ===

# Уровень логирования для нашего приложения
logging.level.kz.library.kitaphana=DEBUG

# Уровень для Spring Framework
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=DEBUG

# Уровень для Hibernate
logging.level.org.hibernate=INFO

# Паттерн логирования в консоли
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Сохранение логов в файл (опционально)
# logging.file.name=logs/kitaphana.log
# logging.file.max-size=10MB
# logging.file.max-history=30

# === НАСТРОЙКИ DEVTOOLS / ӘЗІРЛЕУ ҚҰРАЛДАРЫ ===

# Автоматическая перезагрузка при изменении файлов
spring.devtools.restart.enabled=true

# Исключить папки из отслеживания
spring.devtools.restart.exclude=static/**,public/**

# LiveReload (автообновление браузера)
spring.devtools.livereload.enabled=true

# === НАСТРОЙКИ JACKSON (JSON) / JSON БАПТАУЛАРЫ ===

# Формат даты и времени в JSON
spring.jackson.date-format=yyyy-MM-dd'T'HH:mm:ss
spring.jackson.time-zone=Asia/Almaty

# Не включать null значения в JSON
spring.jackson.default-property-inclusion=non_null

# Красивый вывод JSON (для разработки)
spring.jackson.serialization.indent-output=true

# === НАСТРОЙКИ ACTUATOR (МОНИТОРИНГ) / БАҚЫЛАУ ===

# Включить endpoints для мониторинга (опционально)
# management.endpoints.web.exposure.include=health,info,metrics
# management.endpoint.health.show-details=always

# === КАСТОМНЫЕ НАСТРОЙКИ ПРИЛОЖЕНИЯ / ҚОСЫМШАНЫҢ ЖЕКЕ БАПТАУЛАРЫ ===

# URL Open Library API
app.openlibrary.api.url=https://openlibrary.org
app.openlibrary.search.url=https://openlibrary.org/search.json
app.openlibrary.books.url=https://openlibrary.org/api/books
app.openlibrary.covers.url=https://covers.openlibrary.org/b

# Таймаут для запросов к внешним API (в секундах)
app.api.timeout=30

# Количество книг на странице (пагинация)
app.books.page-size=20

# JWT настройки (если используешь токен-based аутентификацию)
app.jwt.secret=OnlineKitaphanaSecretKeyForJWTTokenGeneration2024MustBeLongEnough
app.jwt.expiration=86400000

# === ПРОФИЛИ SPRING / SPRING ПРОФИЛЬДЕРІ ===

# Активный профиль (dev, prod, test)
# spring.profiles.active=dev

# =============================================================================
# ВАЖНЫЕ ЗАМЕТКИ ДЛЯ НАЧИНАЮЩИХ / БАСТАУШЫЛАРҒА МАҢЫЗДЫ ЕСКЕРТУЛЕР:
# =============================================================================
# 1. ОБЯЗАТЕЛЬНО создай базу данных 'online_kitaphana' в pgAdmin перед запуском
# 2. ОБЯЗАТЕЛЬНО смени spring.datasource.password на свой пароль от PostgreSQL
# 3. Если порт 8080 занят, измени server.port на другой (например, 8081)
# 4. Для продакшена измени spring.jpa.hibernate.ddl-auto на 'validate'
# 5. Храни секреты (пароли, API ключи) в переменных окружения, а не в этом файле!
# =============================================================================
